(()=>{"use strict";var e=window.location.href.toString();console.log(e.toString());var n=document.body.innerText,t=encodeURIComponent(n);fetch("http://127.0.0.1:8000/input_webtext/?textContent=".concat(t),{method:"POST"}).then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(e){console.log(e)})).catch((function(e){console.error("There was a problem with your fetch operation:",e)}));var o,c=document.createElement("input"),r="",a=document.body;(o=document.createElement("div")).id="draggableElement";var d=document.createElement("div");d.id="header";var i=document.createElement("span");i.innerText="FinGPT";var l=document.createElement("div");l.id="icon-container";var s=document.createElement("span");s.innerText="⚙️",s.className="icon",s.onclick=function(){var e=document.getElementById("settings_window"),n=s.getBoundingClientRect();e.style.top="".concat(n.bottom,"px"),e.style.left="".concat(n.left,"px"),e.style.display="none"===e.style.display?"block":"none"};var m=document.createElement("span");m.innerText="➖",m.className="icon",m.onclick=function(){o.classList.contains("minimized")?(o.classList.remove("minimized"),o.style.height="600px"):(o.classList.add("minimized"),o.style.height="60px")};var p=document.createElement("span");p.innerText="❌",p.className="icon",p.onclick=function(){o.style.display="none"},l.appendChild(s),l.appendChild(m),l.appendChild(p),d.appendChild(i),d.appendChild(l);var u=document.createElement("div");u.id="content";var h=document.createElement("h2");h.innerText="Your personalized financial assistant.";var v=document.createElement("p");v.innerText="Ask me something!",u.appendChild(h),u.appendChild(v);var g=document.createElement("div");g.id="inputContainer",c.type="text",c.placeholder="Ask me something!",g.appendChild(c);var E=document.createElement("div");E.id="respons",u.appendChild(E);var f=document.createElement("div");f.id="buttonContainer";var y=document.createElement("button");y.innerText="Ask",y.onclick=function(){var e=performance.now();!function(e){var n=performance.now(),t=document.getElementById("respons"),o=document.createElement("span");o.innerText="You: "+e,t.appendChild(o);var r=document.createElement("span");r.innerText="FinGPT: Loading...",document.getElementById("respons").appendChild(r),document.getElementById("respons").scrollTop=document.getElementById("respons").scrollHeight,e=encodeURI(e),fetch("http://127.0.0.1:8000/get_chat_response/?question=".concat(e),{method:"GET"}).then((function(e){return e.json()})).then((function(e){var o=performance.now()-n;console.log("Time taken for response: ".concat(o," ms")),t.removeChild(r);var a=document.createElement("span");a.innerText="FinGPT: "+e.resp,document.getElementById("respons").appendChild(a),c.value="",document.getElementById("respons").scrollTop=document.getElementById("respons").scrollHeight}))}(c.value);var n=performance.now()-e;console.log("Time taken for response: ".concat(n," ms"))};var T=document.createElement("button");T.innerText="Advanced Ask",T.onclick=function(){var e=performance.now();!function(e){var n=performance.now(),t=document.getElementById("respons");r=e;var o=document.createElement("span");o.innerText="You: "+e,t.appendChild(o);var a=document.createElement("span");a.innerText="FinGPT: Loading...",document.getElementById("respons").appendChild(a),document.getElementById("respons").scrollTop=document.getElementById("respons").scrollHeight,fetch("http://127.0.0.1:8000/get_adv_response/?question=".concat(e),{method:"GET"}).then((function(e){return e.json()})).then((function(e){var o=performance.now()-n;console.log("Time taken for response: ".concat(o," ms")),t.removeChild(a);var r=document.createElement("span");r.innerText="FinGPT: "+e.resp,document.getElementById("respons").appendChild(r),c.value="",document.getElementById("respons").scrollTop=document.getElementById("respons").scrollHeight}))}(c.value);var n=performance.now()-e;console.log("Time taken for response: ".concat(n," ms"))},f.appendChild(y),f.appendChild(T);var C=document.createElement("div");C.className="button-row";var w=document.createElement("button");w.innerText="Clear",w.className="clear-button",w.onclick=function(){var e=document.getElementById("respons"),n=document.getElementById("source_urls");e.innerHTML="",n&&(n.innerHTML=""),fetch("http://127.0.0.1:8000/clear_messages/",{method:"POST"}).then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(e){console.log(e)})).catch((function(e){console.error("There was a problem with your fetch operation:",e)}))};var x=document.createElement("button");x.innerText="Sources",x.className="sources-button",x.onclick=function(){var e;e=r,document.getElementById("sources_window").style.display="block",fetch("http://127.0.0.1:8000/get_source_urls/?query=".concat(String(e)),{method:"GET"}).then((function(e){return e.json()})).then((function(e){console.log(e.resp);var n=e.resp,t=document.getElementById("source_urls");t.innerHTML="",n.forEach((function(e){var n=e[0],o=document.createElement("a");o.href=n,o.innerText=n,o.target="_blank";var c=document.createElement("li");c.appendChild(o),t.appendChild(c)}))}))},C.appendChild(x),C.appendChild(w),o.appendChild(d),o.appendChild(u),o.appendChild(C),o.appendChild(g),o.appendChild(f);var k=document.createElement("div");k.id="sources_window",k.style.display="none";var I=document.createElement("div");I.id="sources_window_header";var b=document.createElement("h2");b.innerText="Sources";var B=document.createElement("span");B.innerText="❌",B.className="icon",B.onclick=function(){k.style.display="none"},I.appendChild(b),I.appendChild(B);var _=document.createElement("ul");_.id="source_urls",k.appendChild(I),k.appendChild(_);var L=document.createElement("div");L.id="settings_window";var N=document.createElement("label");N.innerText="Light Mode";var P=document.createElement("input");function S(e){var n,t,o,c,r,a;function d(o){o.preventDefault();var c=o.clientX-n+window.scrollX,r=o.clientY-t+window.scrollY;e.style.left="".concat(c,"px"),e.style.top="".concat(r,"px")}function i(n){n.preventDefault();var t=r+(n.clientX-o),d=a+(n.clientY-c);t>250&&(e.style.width="".concat(t,"px")),d>300&&(e.style.height="".concat(d,"px"))}function l(){document.removeEventListener("mousemove",d),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",l)}e.addEventListener("mousedown",(function(s){s.preventDefault();var m=e.getBoundingClientRect(),p=s.clientX>m.right-10,u=s.clientY>m.bottom-10;"SPAN"!==s.target.tagName&&"INPUT"!==s.target.tagName&&(p||u)?(o=s.clientX,c=s.clientY,r=m.width,a=m.height,document.addEventListener("mousemove",i)):"SPAN"!==s.target.tagName&&"INPUT"!==s.target.tagName&&(n=s.clientX-m.left,t=s.clientY-m.top,document.addEventListener("mousemove",d)),document.addEventListener("mouseup",l)}))}P.type="checkbox",P.onchange=function(){document.body.classList.toggle("light-mode")},N.appendChild(P),L.appendChild(N),a.appendChild(L),document.addEventListener("click",(function(e){var n=document.getElementById("settings_window");"block"!==n.style.display||n.contains(e.target)||s.contains(e.target)||(n.style.display="none")})),a.appendChild(k),a.appendChild(o),S(o=document.getElementById("draggableElement")),S(k)})();
//# sourceMappingURL=bundle.js.map